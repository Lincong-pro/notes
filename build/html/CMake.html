

<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" >
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>黑马面面布局开发 &mdash; cmake 0.0.1 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Welcome to cmake’s documentation!" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> cmake
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">黑马面面布局开发</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id2">一、目的</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id3">1.1 技术方案</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id4">1.2 代码规范</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id5">1.2 目录规范</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id6">二、流程开发</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id7">2.1 蓝湖/摹客协作平台</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id8">2.2 适配方案</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id9">2.3 初始化文件</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id10">2.4 布局模块</a></li>
<li class="toctree-l3"><a class="reference internal" href="#swiper">2.5 swiper 插件使用</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id11">2.6 图标字体上传下载</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id12">2.7 上传码云并发布部署静态网站</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#cmake">CMake 官方文档学习</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#build-targets">build targets</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#gdal">GDAL 库链接</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">cmake</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>黑马面面布局开发</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/CMake.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="id1">
<h1>黑马面面布局开发<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<section id="id2">
<h2>一、目的<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<ol class="simple">
<li><p>了解移动端页面开发流程</p></li>
<li><p>掌握移动端常见布局思路</p></li>
</ol>
<section id="id3">
<h3>1.1 技术方案<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="nt">1</span><span class="o">.</span> <span class="nt">弹性盒子</span> <span class="o">+</span> <span class="nt">rem</span> <span class="o">+</span> <span class="nt">LESS</span>
<span class="nt">4</span><span class="o">.</span> <span class="nt">最小适配设备为iphone5</span> <span class="nt">320px</span>  <span class="nt">最大设配设备为iphone8plus</span><span class="o">(</span><span class="nt">ipad能正常查看内容即可</span><span class="o">)</span>
</pre></div>
</div>
</section>
<section id="id4">
<h3>1.2 代码规范<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span>1. 类名语义化,尽量精短、明确，必须以字母开头命名，且全部字母为小写，单词之间统一使用下划线“_” 连接
2. 类名嵌套层次尽量不超过三层
3. 尽量避免直接使用元素选择器
4. 属性书写顺序
   布局定位属性：display / position / float / clear / visibility / overflow
   尺寸属性：width / height / margin / padding / border / background
   文本属性：color / font / text-decoration / text-align / vertical-align
   其他属性（CSS3）：content / cursor / border-radius / box-shadow / text-shadow
5. 避免使用id选择器
6. 避免使用通配符*和!important
</pre></div>
</div>
</section>
<section id="id5">
<h3>1.2 目录规范<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span>项目文件夹：heimamm
	样式文件夹：css
	业务类图片文件夹：images
	样式类图片文件夹： icons
	字体类文件夹： fonts
</pre></div>
</div>
</section>
</section>
<section id="id6">
<h2>二、流程开发<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
<section id="id7">
<h3>2.1 蓝湖/摹客协作平台<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>UI 设计师 psd 效果图完成后，会上传到蓝湖//摹客里面，同时会拉前端工程师进入开发</p></li>
<li><p>大部分情况下，UI 会把图片按照前端设计要求给切好</p></li>
<li><p>UI 设计师 上传蓝湖到或者/摹客（了解）</p></li>
</ul>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span>1. /摹客官网地址： https://www.mockplus.cn/  注册一个账号
2. 下载moke  ps插件
3. PS 安装/摹客/蓝湖插件
3. 打开PS/摹客/蓝湖插件
4. 上传（需要切图，需要先标注切图）
5. 查看项目
6. 邀请成员进入（分享按钮，链接地址）
</pre></div>
</div>
<ul class="simple">
<li><p>前端设计师可以直接/摹客/蓝湖测量取值</p></li>
</ul>
</section>
<section id="id8">
<h3>2.2 适配方案<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>flex 布局</p></li>
<li><p>百分比布局</p></li>
<li><p>rem 布局</p></li>
<li><p>vw/vh 布局</p></li>
<li><p>响应式布局</p></li>
<li><p>本次案例 flex + rem + + flexible.js + LESS</p></li>
</ul>
</section>
<section id="id9">
<h3>2.3 初始化文件<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>引入 normalize.css</p></li>
<li><p>less 中 初始化 body 样式</p></li>
<li><p>约束范围</p></li>
<li><div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="p">@</span><span class="k">media</span> <span class="nt">screen</span> <span class="nt">and</span> <span class="o">(</span><span class="nt">min-width</span><span class="o">:</span> <span class="nt">750px</span><span class="o">)</span> <span class="p">{</span>
  <span class="nt">html</span> <span class="p">{</span>
    <span class="k">font-size</span><span class="p">:</span> <span class="mf">37.5</span><span class="kt">px</span> <span class="cp">!important</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="id10">
<h3>2.4 布局模块<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<ol>
<li><p>头部模块 .header 高度为 80px</p></li>
<li><p>nav 模块制作 多用 flex</p></li>
<li><p>充电学习 阴影</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="nt">box-shadow</span><span class="o">:</span> <span class="nt">0</span> <span class="nt">0px</span> <span class="nt">10px</span> <span class="nt">rgba</span><span class="o">(</span><span class="nt">0</span><span class="o">,</span> <span class="nt">0</span><span class="o">,</span> <span class="nt">0</span><span class="o">,</span> <span class="nt">0</span><span class="p">.</span><span class="nc">1</span><span class="o">);</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="swiper">
<h3>2.5 swiper 插件使用<a class="headerlink" href="#swiper" title="Permalink to this headline">¶</a></h3>
<p>官网地址：<a class="reference external" href="https://www.swiper.com.cn/">https://www.swiper.com.cn/</a></p>
<ul class="simple">
<li><p>下载需要的 css 和 js 文件 html 页面中 引入相关文件</p></li>
<li><p>官网找到类似案例，复制 html 结构，css 样式 js 语法</p></li>
<li><p>根据需求定制修改模块</p></li>
</ul>
</section>
<section id="id11">
<h3>2.6 图标字体上传下载<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h3>
<p>上传步骤：</p>
<ol class="simple">
<li><p>让 UI 美工准备好 图标字体（必须是 svg 格式）</p></li>
<li><p>点上传按钮（保留颜色并提交）</p></li>
<li><p>生成之后加入购物车即可</p></li>
<li><p>点击下载 — 下载代码</p></li>
</ol>
<p>小技巧： 如何批量下载全部字体图标呢？</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">span</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s2">&quot;.icon-cover&quot;</span><span class="p">);</span>
<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mf">0</span><span class="p">,</span> <span class="nx">len</span> <span class="o">=</span> <span class="nx">span</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">span</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">).</span><span class="nx">click</span><span class="p">());</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="id12">
<h3>2.7 上传码云并发布部署静态网站<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h3>
<p>准备工作： 需要下载 git 软件 需要码云注册账号</p>
<p>git 可以把我们的本地网站提交上传到远程仓库（码云 gitee）里面 类似以前的 ftp</p>
<p>码云 就是远程仓库， 类似服务器</p>
<ol>
<li><p>码云创建新的仓库。 heimamm</p></li>
<li><p>利用 git 提交 把本地网站提交到 码云新建的仓库里面</p>
<ul>
<li><p>在网站根目录右键– Git Bash Here</p></li>
<li><p>如果是第一次利用 git 提交，请配置好全局选项</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">git</span> <span class="nx">config</span> <span class="o">--</span><span class="nb">global</span> <span class="nx">user</span><span class="p">.</span><span class="nx">name</span> <span class="s2">&quot;用户名&quot;</span>
<span class="nx">git</span> <span class="nx">config</span> <span class="o">--</span><span class="nb">global</span> <span class="nx">user</span><span class="p">.</span><span class="nx">email</span> <span class="s2">&quot;你的邮箱地址&quot;</span>
</pre></div>
</div>
</li>
<li><p>初始化仓库</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">git</span> <span class="nx">init</span>
</pre></div>
</div>
</li>
<li><p>把本地文件放到暂存区</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">git</span> <span class="nx">add</span> <span class="p">.</span>
</pre></div>
</div>
</li>
<li><p>把本地文件放到本地仓库里面</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">git</span> <span class="nx">commit</span> <span class="o">-</span><span class="nx">m</span> <span class="s1">&#39;提交黑马面面网站&#39;</span>
</pre></div>
</div>
</li>
<li><p>链接远程仓库</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">git</span> <span class="nx">remote</span> <span class="nx">add</span> <span class="nx">origin</span> <span class="nx">你新建的仓库地址</span>
</pre></div>
</div>
</li>
<li><p>把本地仓库的文件推送到远程仓库 push</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">git</span> <span class="nx">push</span> <span class="o">-</span><span class="nx">u</span> <span class="nx">origin</span> <span class="nx">master</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>码云部署发布静态网站</p></li>
</ol>
<p>最后： 如果提交网站，你不愿意用 git 提交， 可以直接找到仓库，里面有文件，选择上传本地文件即可。</p>
<p>但是，1 个小时内，只能上传 20 个以内的文件， 前端人员，git 必备技能</p>
</section>
</section>
</section>
<section id="cmake">
<h1>CMake 官方文档学习<a class="headerlink" href="#cmake" title="Permalink to this headline">¶</a></h1>
<section id="build-targets">
<h2>build targets<a class="headerlink" href="#build-targets" title="Permalink to this headline">¶</a></h2>
<p>add_library(archive MODULE 7Z.cpp) //不生成.so 或者.a 文件
模块的特点就是不需要链接，只有在运行的时候才会选择性的去加载，所以不需要 target_link_libraries()
add_library(archive SHARED 7Z.cpp) //生成.so 动态文件
add_library(archive STATIC 7Z.cpp) //生成.a 静态库
除了上面的选项，我们仍然可以给我们编译的库指定框架（即哪一个系统下才能使用这个库）
add_library(MyFramework SHARED MyFramework.cpp)
set_target_properties(MyFramework PROPERTIES
FRAMEWORK TRUE
FRAMEWORK_VERSION A # Version “A” is macOS convention
MACOSX_FRAMEWORK_IDENTIFIER org.cmake.MyFramework
)
当然我们还有一个选项就是将我们所编译的库连接到另外一个库上面
前提条件就是我们所编译的库必须指定编译类型为 OBJECT 类型，然后
在另外一个库使用$&lt;TARGET_OBJECT:objectlibname&gt;进行连接，当然
也可以直接使用 target_link_libraries 进行连接
add_library(archive OBJECT archive.cpp zip.cpp lzma.cpp)
add_library(archiveExtras STATIC $&lt;TARGET_OBJECTS:archive&gt; extras.cpp)
add_executable(test_exe $&lt;TARGET_OBJECTS:archive&gt; test.cpp)</p>
<p>当然除了库可以连接 OBJECT 类型的 object 库之外，其他的 executable target
仍然可以连接这个库，即可以多次连接
add_library(archive OBJECT archive.cpp zip.cpp lzma.cpp)
add_library(archiveExtras STATIC extras.cpp)
target_link_libraries(archiveExtras PUBLIC archive)
add_executable(test_exe test.cpp)
target_link_libraries(test_exe archive)</p>
<ul>
<li><p>target_include_directories、target_compile_definitions、target_compile_options 分别为 include_directories、compile_definitions、compile_options 的补充（扩展）</p></li>
<li><p>上面的每一条命令都有访问项，分别为 PRIVATE、PUBLIC、INTERFACE，其定义就是 PRIVATE 模式仅仅只填充非接口类型的变量、INTERFACE 就单纯只填充接口变量、PUBLIC 模式两种变量</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">target_compile_definitions</span><span class="p">(</span><span class="s">archive</span>
  <span class="s">PRIVATE</span> <span class="s">BUILDING_WITH_LZMA</span>
  <span class="s">INTERFACE</span> <span class="s">USING_ARCHIVE_LIB</span>
<span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>我们在胡老师的脚本 sh 脚本中经常会看见-D、-I 之类的，实际上官方文档的解释就是-D 就是 COMILE_DEFINITIONS.-I 代表 INCLUDE_DIRECTORIES</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># 将后面的cpp编译为源文件
set(srcs archive.cpp zip.cpp)
# 如果找到了这个库就向上面的srcs增加一个编译的cpp
if (LZMA_FOUND)
  list(APPEND srcs lzma.cpp)
endif()
# 将src编译为动态库.so结尾
add_library(archive SHARED ${srcs})
if (LZMA_FOUND)
  # 库文件被编译使用编译器指定compile_define
  # The archive library sources are compiled with -DBUILDING_WITH_LZMA
  # 指定库的compile_define
  target_compile_definitions(archive PRIVATE BUILDING_WITH_LZMA)
endif()
# 指定库的属性为接口类型的USING_ARCHIVE_LIB
target_compile_definitions(archive INTERFACE USING_ARCHIVE_LIB)
# 编译为可执行文件
add_executable(consumer)
# Link consumer to archive and consume its usage requirements. The consumer
# executable sources are compiled with -DUSING_ARCHIVE_LIB.
target_link_libraries(consumer archive)
</pre></div>
</div>
<p>target_link_libraries 实际上做了许多事情，该命令能将当前的源文件目录和 build 文件目录联系在一起 cmake_include_current_dir 能够很方便实现上面的要求，当然如果是 interface_include_directories 目录就要使用 cmake_include_current_dir_in_interface 去连接 include 目录，但是 target_link_libraries 能够实现上面的事。</p>
</li>
<li><p>PUBLIC PRIVATE INTERFACE 各自的作用</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">add_library</span><span class="p">(</span><span class="s">archive</span> <span class="s">archive.cpp</span><span class="p">)</span>
<span class="c"># 定义接口属性，只要引入了该接口就代表该引入该库</span>
<span class="nb">target_compile_definitions</span><span class="p">(</span><span class="s">archive</span> <span class="s">INTERFACE</span> <span class="s">USING_ARCHIVE_LIB</span><span class="p">)</span>
<span class="nb">add_library</span><span class="p">(</span><span class="s">serialization</span> <span class="s">serialization.cpp</span><span class="p">)</span>
<span class="c"># 让生成的serialization target依赖archive库，但是由于显示的属性是INTERFACE,所以就是我只需要使用你的头文件即.h文件，其余的部分我都不想要</span>
<span class="nb">target_compile_definitions</span><span class="p">(</span><span class="s">serialization</span> <span class="s">INTERFACE</span> <span class="s">USING_SERIALIZATION_LIB</span><span class="p">)</span>

<span class="nb">add_library</span><span class="p">(</span><span class="s">archiveExtras</span> <span class="s">extras.cpp</span><span class="p">)</span>
<span class="c"># 下面的PBLIC属性的依赖就是就相当于直接就继承了其头文件和源文件即.h和.cpp，后面的接着继承的就会一直拥有该库</span>
<span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">archiveExtras</span> <span class="s">PUBLIC</span> <span class="s">archive</span><span class="p">)</span>
<span class="c"># 该属性不会传递给子代，即私有依赖属性不传递给子代</span>
<span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">archiveExtras</span> <span class="s">PRIVATE</span> <span class="s">serialization</span><span class="p">)</span>
<span class="c"># archiveExtras is compiled with -DUSING_ARCHIVE_LIB</span>
<span class="c"># and -DUSING_SERIALIZATION_LIB</span>

<span class="nb">add_executable</span><span class="p">(</span><span class="s">consumer</span> <span class="s">consumer.cpp</span><span class="p">)</span>
<span class="c"># consumer is compiled with -DUSING_ARCHIVE_LIB</span>
<span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">consumer</span> <span class="s">archiveExtras</span><span class="p">)</span>
</pre></div>
</div>
<p>由于库与库之间有继承的依赖关系，尤其是 PUBLIC、PRIVATE、INTERFACE 类型，所以 link 的先后关系必须小心，尤其是头文件问题和库继承不一致的时候。比如我的 target myExe 必须按照 lib1 lib2 lib3 的关系进行继承，但是头文件目录必须以 lib3 lib1 lib2</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="c"># 库的连接顺序</span>
<span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">myExe</span> <span class="s">lib1</span> <span class="s">lib2</span> <span class="s">lib3</span><span class="p">)</span>
<span class="c"># 头文件的连接顺序</span>
<span class="nb">target_include_directories</span><span class="p">(</span><span class="s">myExe</span>
  <span class="s">PRIVATE</span> <span class="o">$&lt;</span><span class="nv">TARGET_PROPERTY:lib3,INTERFACE_INCLUDE_DIRECTORIES</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>兼容的接口特性</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span>add_executable(exe1 exe1.cpp)
# 设置target exe1是完全独立编译
set_property(TARGET exe1 PROPERTY POSITION_INDEPENDENT_CODE ON)
# 将lib2.cpp编译为动态库，同样是完全独立编译
add_library(lib1 SHARED lib1.cpp)
set_property(TARGET lib1 PROPERTY INTERFACE_POSITION_INDEPENDENT_CODE ON)
add_executable(exe2 exe2.cpp)
# target exe2连接动态库lib1
target_link_libraries(exe2 lib1)
对于compile_definition中的position_independent_code对于编译的动态库而言是默认设置的。
</pre></div>
</div>
<p>接下来演示不兼容的情况</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">add_library</span><span class="p">(</span><span class="s">lib1</span> <span class="s">SHARED</span> <span class="s">lib1.cpp</span><span class="p">)</span>
<span class="nb">set_property</span><span class="p">(</span><span class="s">TARGET</span> <span class="s">lib1</span> <span class="s">PROPERTY</span> <span class="s">INTERFACE_POSITION_INDEPENDENT_CODE</span> <span class="s">ON</span><span class="p">)</span>

<span class="nb">add_library</span><span class="p">(</span><span class="s">lib2</span> <span class="s">SHARED</span> <span class="s">lib2.cpp</span><span class="p">)</span>
<span class="nb">set_property</span><span class="p">(</span><span class="s">TARGET</span> <span class="s">lib2</span> <span class="s">PROPERTY</span> <span class="s">INTERFACE_POSITION_INDEPENDENT_CODE</span> <span class="s">OFF</span><span class="p">)</span>

<span class="nb">add_executable</span><span class="p">(</span><span class="s">exe1</span> <span class="s">exe1.cpp</span><span class="p">)</span>
<span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">exe1</span> <span class="s">lib1</span><span class="p">)</span>
<span class="nb">set_property</span><span class="p">(</span><span class="s">TARGET</span> <span class="s">exe1</span> <span class="s">PROPERTY</span> <span class="s">POSITION_INDEPENDENT_CODE</span> <span class="s">OFF</span><span class="p">)</span>

<span class="nb">add_executable</span><span class="p">(</span><span class="s">exe2</span> <span class="s">exe2.cpp</span><span class="p">)</span>
<span class="c"># 同时连接到两个不相互兼容的库</span>
<span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">exe2</span> <span class="s">lib1</span> <span class="s">lib2</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># 假设我们的lib1和lib2不兼容，其中的lib1要求独立编译的方式进行编译，lib2要求非独立编译，然后当我们的exe2连接到两个属性要求不一致的库之后就出现了如下问题</span>
<span class="n">CMake</span> <span class="n">Error</span><span class="p">:</span> <span class="n">The</span> <span class="n">INTERFACE_POSITION_INDEPENDENT_CODE</span> <span class="nb">property</span> <span class="n">of</span> <span class="s2">&quot;lib2&quot;</span> <span class="n">does</span>
<span class="ow">not</span> <span class="n">agree</span> <span class="k">with</span> <span class="n">the</span> <span class="n">value</span> <span class="n">of</span> <span class="n">POSITION_INDEPENDENT_CODE</span> <span class="n">already</span> <span class="n">determined</span>
<span class="k">for</span> <span class="s2">&quot;exe2&quot;</span><span class="o">.</span>
</pre></div>
</div>
</li>
</ul>
<section id="gdal">
<h3>GDAL 库链接<a class="headerlink" href="#gdal" title="Permalink to this headline">¶</a></h3>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="c"># 引入Boost库的头文件 和 GDAL的头文件</span>
<span class="nb">target_include_directories</span><span class="p">(</span><span class="o">${</span><span class="nv">PROJECT_NAME</span><span class="o">}</span>
    <span class="s">PUBLIC</span> <span class="o">${</span><span class="nv">Boost_INCLUDE_DIR</span><span class="o">}</span> <span class="o">${</span><span class="nv">GDAL_INCLUDE_DIR</span><span class="o">}</span>
<span class="p">)</span>
<span class="c"># 引入Boost库的lib文件 和 GDAL的lib文件</span>
<span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">lincong</span> <span class="o">${</span><span class="nv">Boost_LIBRARIES</span><span class="o">}</span> <span class="o">${</span><span class="nv">GDAL_LIBRARY</span><span class="o">}</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to cmake’s documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, lincong.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>